"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([[831],{4831:(Y,m,n)=>{n.r(m),n.d(m,{ProfilesModule:()=>A});var c=n(6895),u=n(4364),r=n(5412),o=n(4650),i=n(4006),d=n(4859),C=n(9549),p=n(4144);function w(t,a){1&t&&(o.TgZ(0,"mat-form-field"),o._UZ(1,"input",11),o.qZA())}let P=(()=>{class t{constructor(e,s,l){this.fb=e,this.dialogRef=s,this.data=l}ngOnInit(){const{username:e,firstLogin:s}=this.data;this.form=this.fb.group(s?{username:e,newPassword:"",confirmNewPassword:""}:{username:e,currentPassword:"",newPassword:"",confirmNewPassword:""})}onChangePasswordClick(){this.dialogRef.close(this.form.value)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(i.j3),o.Y36(r.so),o.Y36(r.WI))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-change-password-dialog"]],decls:16,vars:3,consts:[[3,"formGroup"],["mat-dialog-title",""],["mat-dialog-content","",1,"content"],[1,"username-field"],["matInput","","type","text","id","username","placeholder","Username","autocomplete","username","formControlName","username"],[4,"ngIf"],["matInput","","type","password","id","newPassword","placeholder","New Password","autocomplete","new-password","formControlName","newPassword"],["matInput","","type","password","id","confirmNewPassword","placeholder","Confirm New Password","autocomplete","new-password","formControlName","confirmNewPassword"],["mat-dialog-actions","","align","start",1,"actions"],["mat-flat-button","","color","accent","type","submit",3,"disabled","click"],["mat-button","","mat-dialog-close",""],["matInput","","type","password","id","currentPassword","placeholder","Current password","autocomplete","old-password","formControlName","currentPassword"]],template:function(e,s){1&e&&(o.TgZ(0,"form",0)(1,"h2",1),o._uU(2,"Change password"),o.qZA(),o.TgZ(3,"div",2)(4,"mat-form-field",3),o._UZ(5,"input",4),o.qZA(),o.YNc(6,w,2,0,"mat-form-field",5),o.TgZ(7,"mat-form-field"),o._UZ(8,"input",6),o.qZA(),o.TgZ(9,"mat-form-field"),o._UZ(10,"input",7),o.qZA()(),o.TgZ(11,"div",8)(12,"button",9),o.NdJ("click",function(){return s.onChangePasswordClick()}),o._uU(13,"Save changes"),o.qZA(),o.TgZ(14,"button",10),o._uU(15,"Cancel"),o.qZA()()()),2&e&&(o.Q6J("formGroup",s.form),o.xp6(6),o.Q6J("ngIf",!s.data.firstLogin),o.xp6(6),o.Q6J("disabled",!s.form.valid))},dependencies:[c.O5,d.lW,r.ZT,r.uh,r.xY,r.H8,C.KE,p.Nt,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.username-field[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),t})();var v=n(3900),Z=n(515),g=n(6943),y=n(8505),N=n(529);let h=(()=>{class t{constructor(e,s){this.http=e,this.auth=s}changePassword(e){return this.http.post("/users/change-password",e).pipe((0,y.b)(this.auth.setLoggedUser))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(N.eN),o.LFG(g.e))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();var f=n(3546);function T(t,a){if(1&t){const e=o.EpF();o.TgZ(0,"mat-card",1)(1,"mat-card-content")(2,"p"),o._uU(3),o.qZA(),o.TgZ(4,"button",2),o.NdJ("click",function(){const M=o.CHM(e).ngIf,J=o.oxw();return o.KtG(J.openChangePasswordDialog(M))}),o._uU(5,"Change password"),o.qZA()()()}if(2&t){const e=a.ngIf;o.xp6(3),o.Oqu(e.username)}}const U=[{path:"",component:(()=>{class t{constructor(e,s,l){this.authService=e,this.userService=s,this.dialog=l,this.user$=this.authService.getCurrentUser()}ngOnInit(){}openChangePasswordDialog(e){this.dialog.open(P,{disableClose:!0,data:{username:e.username,firstLogin:e.firstLogin}}).afterClosed().pipe((0,v.w)(l=>l?this.userService.changePassword(l):Z.E)).subscribe(()=>console.debug("User password was successfully changed"))}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(g.e),o.Y36(h),o.Y36(r.uw))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-profile-container"]],decls:2,vars:3,consts:[["class","profile-info",4,"ngIf"],[1,"profile-info"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,s){1&e&&(o.YNc(0,T,6,1,"mat-card",0),o.ALo(1,"async")),2&e&&o.Q6J("ngIf",o.lcZ(1,1,s.user$))},dependencies:[c.O5,f.a8,f.dn,d.lW,c.Ov],styles:[".profile-info[_ngcontent-%COMP%]{width:80%;margin:0 auto}"],changeDetection:0}),t})()}];let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[u.Bz.forChild(U),u.Bz]}),t})(),A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[h],imports:[c.ez,I,f.QW,d.ot,r.Is,p.c,i.UX]}),t})()}}]);