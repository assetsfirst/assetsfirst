"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([[458],{2458:(Ci,U,l)=>{l.r(U),l.d(U,{PortfolioPositionsModule:()=>bi});var b=l(6895),F=l(2761),A=l(9585),M=l(8675),x=l(9300),fe=l(5577),z=l(4004),v=l(5412),h=l(9521),t=l(4650),W=l(529);let O=(()=>{class n{constructor(e){this.http=e}getTagCategories(){return this.http.get("/tag-categories")}getTagsByCategory(e){return this.http.get(`/tag-categories/${e}/tags`)}addTagToCategory(e,i){return this.http.post(`/tag-categories/${e}/tags`,null,{params:{tag:i}})}deleteCategoryTag(e,i){return this.http.delete(`/tag-categories/${e}/tags/${i}`)}findTags(e){return this.http.get(`/tag-categories/tags/search?searchTerm=${e}`)}createTagCategory(e){return this.http.post("/tag-categories",e)}updateTagCategory(e){return this.http.patch(`/tag-categories/${e.id}`,e)}deleteTagCategory(e){return this.http.delete(`/tag-categories/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(W.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var u=l(4006),w=l(4859),D=l(7392),c=l(3238),_=l(1281),k=l(3353),y=l(7579),C=l(6451),P=l(5698),H=l(2722),T=l(2687),J=l(445),N=l(5017),I=l(9549);const ve=["*"],K=new t.OlP("MatChipRemove"),X=new t.OlP("MatChipAvatar"),ee=new t.OlP("MatChipTrailingIcon");class ye{constructor(o){this._elementRef=o}}const Ce=(0,c.sb)((0,c.pj)((0,c.Kr)(ye),"primary"),-1);let E=(()=>{class n extends Ce{constructor(e,i,a,s,r,d,g,m){super(e),this._ngZone=i,this._changeDetectorRef=r,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this.role="option",this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new y.x,this._onBlur=new y.x,this.selectionChange=new t.vpe,this.destroyed=new t.vpe,this.removed=new t.vpe,this._addHostClassName(),this._chipRippleTarget=d.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new c.IR(this,i,this._chipRippleTarget,a),this._chipRipple.setupTriggerEvents(e),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===g,this.tabIndex=null!=m&&parseInt(m)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(e){const i=(0,_.Ig)(e);i!==this._selected&&(this._selected=i,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(e){this._value=e}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(e){this._selectable=(0,_.Ig)(e)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(e){this._disabled=(0,_.Ig)(e)}get removable(){return this._removable}set removable(e){this._removable=(0,_.Ig)(e)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const e="mat-basic-chip",i=this._elementRef.nativeElement;i.hasAttribute(e)||i.tagName.toLowerCase()===e?i.classList.add(e):i.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(e=!1){return this._selected=!this.selected,this._dispatchSelectionChange(e),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(e){this.disabled&&e.preventDefault()}_handleKeydown(e){if(!this.disabled)switch(e.keyCode){case h.yY:case h.ZH:this.remove(),e.preventDefault();break;case h.L_:this.selectable&&this.toggleSelected(!0),e.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,P.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(e=!1){this.selectionChange.emit({source:this,isUserInput:e,selected:this._selected})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(k.t4),t.Y36(c.Y2,8),t.Y36(t.sBO),t.Y36(b.K0),t.Y36(t.QbO,8),t.$8M("tabindex"))},n.\u0275dir=t.lG2({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(e,i,a){if(1&e&&(t.Suo(a,X,5),t.Suo(a,ee,5),t.Suo(a,K,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.avatar=s.first),t.iGM(s=t.CRH())&&(i.trailingIcon=s.first),t.iGM(s=t.CRH())&&(i.removeIcon=s.first)}},hostAttrs:[1,"mat-chip","mat-focus-indicator"],hostVars:15,hostBindings:function(e,i){1&e&&t.NdJ("click",function(s){return i._handleClick(s)})("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i.focus()})("blur",function(){return i._blur()}),2&e&&(t.uIk("tabindex",i.disabled?null:i.tabIndex)("role",i.role)("disabled",i.disabled||null)("aria-disabled",i.disabled.toString())("aria-selected",i.ariaSelected),t.ekj("mat-chip-selected",i.selected)("mat-chip-with-avatar",i.avatar)("mat-chip-with-trailing-icon",i.trailingIcon||i.removeIcon)("mat-chip-disabled",i.disabled)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",role:"role",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[t.qOj]}),n})(),j=(()=>{class n{constructor(e,i){this._parentChip=e,"BUTTON"===i.nativeElement.nodeName&&i.nativeElement.setAttribute("type","button")}_handleClick(e){const i=this._parentChip;i.removable&&!i.disabled&&i.remove(),e.stopPropagation(),e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(E),t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(e,i){1&e&&t.NdJ("click",function(s){return i._handleClick(s)})},features:[t._Bn([{provide:K,useExisting:n}])]}),n})();const te=new t.OlP("mat-chips-default-options"),Me=(0,c.FD)(class{constructor(n,o,e,i){this._defaultErrorStateMatcher=n,this._parentForm=o,this._parentFormGroup=e,this.ngControl=i,this.stateChanges=new y.x}});let Ie=0;class Ae{constructor(o,e){this.source=o,this.value=e}}let Z=(()=>{class n extends Me{constructor(e,i,a,s,r,d,g){super(d,s,r,g),this._elementRef=e,this._changeDetectorRef=i,this._dir=a,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new y.x,this._uid="mat-chip-list-"+Ie++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(m,f)=>m===f,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new t.vpe,this.valueChange=new t.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get role(){return this._explicitRole?this._explicitRole:this.empty?null:"listbox"}set role(e){this._explicitRole=e}get multiple(){return this._multiple}set multiple(e){this._multiple=(0,_.Ig)(e),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this.writeValue(e),this._value=e}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(u.kI.required)??!1}set required(e){this._required=(0,_.Ig)(e),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=(0,_.Ig)(e),this._syncChipsState()}get selectable(){return this._selectable}set selectable(e){this._selectable=(0,_.Ig)(e),this._syncChipsState()}set tabIndex(e){this._userTabIndex=e,this._tabIndex=e}get chipSelectionChanges(){return(0,C.T)(...this.chips.map(e=>e.selectionChange))}get chipFocusChanges(){return(0,C.T)(...this.chips.map(e=>e._onFocus))}get chipBlurChanges(){return(0,C.T)(...this.chips.map(e=>e._onBlur))}get chipRemoveChanges(){return(0,C.T)(...this.chips.map(e=>e.destroyed))}ngAfterContentInit(){this._keyManager=new T.Em(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe((0,H.R)(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.tabOut.pipe((0,H.R)(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe((0,M.O)(null),(0,H.R)(this._destroyed)).subscribe(()=>{(this.disabled||!this.selectable)&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new N.Ov(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(e){this._chipInput=e,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",e.id)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}writeValue(e){this.chips&&this._setSelectionByValue(e,!1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this.stateChanges.next()}onContainerClick(e){this._originatesFromChip(e)||this.focus()}focus(e){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(e),this.stateChanges.next()))}_focusInput(e){this._chipInput&&this._chipInput.focus(e)}_keydown(e){const i=e.target;i&&i.classList.contains("mat-chip")&&(this._keyManager.onKeydown(e),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const e=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(e)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(e){return e>=0&&e<this.chips.length}_setSelectionByValue(e,i=!0){if(this._clearSelection(),this.chips.forEach(a=>a.deselect()),Array.isArray(e))e.forEach(a=>this._selectValue(a,i)),this._sortValues();else{const a=this._selectValue(e,i);a&&i&&this._keyManager.setActiveItem(a)}}_selectValue(e,i=!0){const a=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,e));return a&&(i?a.selectViaInteraction():a.select(),this._selectionModel.select(a)),a}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(e){this._selectionModel.clear(),this.chips.forEach(i=>{i!==e&&i.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(e=>{e.selected&&this._selectionModel.select(e)}),this.stateChanges.next())}_propagateChanges(e){let i=null;i=Array.isArray(this.selected)?this.selected.map(a=>a.value):this.selected?this.selected.value:e,this._value=i,this.change.emit(new Ae(this,i)),this.valueChange.emit(i),this._onChange(i),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(e=>{e.source.selected?this._selectionModel.select(e.source):this._selectionModel.deselect(e.source),this.multiple||this.chips.forEach(i=>{!this._selectionModel.isSelected(i)&&i.selected&&i.deselect()}),e.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(e=>{let i=this.chips.toArray().indexOf(e.chip);this._isValidIndex(i)&&this._keyManager.updateActiveItem(i),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(e=>{const i=e.chip,a=this.chips.toArray().indexOf(e.chip);this._isValidIndex(a)&&i._hasFocus&&(this._lastDestroyedChipIndex=a)})}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-chip"))return!0;i=i.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(e=>e._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(e=>{e._chipListDisabled=this._disabled,e._chipListMultiple=this.multiple,e.chipListSelectable=this._selectable})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(J.Is,8),t.Y36(u.F,8),t.Y36(u.sg,8),t.Y36(c.rD),t.Y36(u.a5,10))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-chip-list"]],contentQueries:function(e,i,a){if(1&e&&t.Suo(a,E,5),2&e){let s;t.iGM(s=t.CRH())&&(i.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:14,hostBindings:function(e,i){1&e&&t.NdJ("focus",function(){return i.focus()})("blur",function(){return i._blur()})("keydown",function(s){return i._keydown(s)}),2&e&&(t.Ikx("id",i._uid),t.uIk("tabindex",i.disabled?null:i._tabIndex)("aria-required",i.role?i.required:null)("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-multiselectable",i.multiple)("role",i.role)("aria-orientation",i.ariaOrientation),t.ekj("mat-chip-list-disabled",i.disabled)("mat-chip-list-invalid",i.errorState)("mat-chip-list-required",i.required))},inputs:{role:"role",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[t._Bn([{provide:I.Eo,useExisting:n}]),t.qOj],ngContentSelectors:ve,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"div",0),t.Hsn(1),t.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-chip::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}.mat-standard-chip._mat-animation-noopable{transition:none !important;animation:none !important}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}'],encapsulation:2,changeDetection:0}),n})(),we=0,Y=(()=>{class n{constructor(e,i){this._elementRef=e,this._defaultOptions=i,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new t.vpe,this.placeholder="",this.id="mat-chip-list-input-"+we++,this._disabled=!1,this.inputElement=this._elementRef.nativeElement}set chipList(e){e&&(this._chipList=e,this._chipList.registerInput(this))}get addOnBlur(){return this._addOnBlur}set addOnBlur(e){this._addOnBlur=(0,_.Ig)(e)}get disabled(){return this._disabled||this._chipList&&this._chipList.disabled}set disabled(e){this._disabled=(0,_.Ig)(e)}get empty(){return!this.inputElement.value}ngOnChanges(){this._chipList.stateChanges.next()}ngOnDestroy(){this.chipEnd.complete()}ngAfterContentInit(){this._focusLastChipOnBackspace=this.empty}_keydown(e){if(e){if(e.keyCode===h.Mf&&!(0,h.Vb)(e,"shiftKey")&&this._chipList._allowFocusEscape(),e.keyCode===h.ZH&&this._focusLastChipOnBackspace)return this._chipList._keyManager.setLastItemActive(),void e.preventDefault();this._focusLastChipOnBackspace=!1}this._emitChipEnd(e)}_keyup(e){!this._focusLastChipOnBackspace&&e.keyCode===h.ZH&&this.empty&&(this._focusLastChipOnBackspace=!0,e.preventDefault())}_blur(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}_focus(){this.focused=!0,this._focusLastChipOnBackspace=this.empty,this._chipList.stateChanges.next()}_emitChipEnd(e){!this.inputElement.value&&!!e&&this._chipList._keydown(e),(!e||this._isSeparatorKey(e))&&(this.chipEnd.emit({input:this.inputElement,value:this.inputElement.value,chipInput:this}),e?.preventDefault())}_onInput(){this._chipList.stateChanges.next()}focus(e){this.inputElement.focus(e)}clear(){this.inputElement.value="",this._focusLastChipOnBackspace=!0}_isSeparatorKey(e){return!(0,h.Vb)(e)&&new Set(this.separatorKeyCodes).has(e.keyCode)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(te))},n.\u0275dir=t.lG2({type:n,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(e,i){1&e&&t.NdJ("keydown",function(s){return i._keydown(s)})("keyup",function(s){return i._keyup(s)})("blur",function(){return i._blur()})("focus",function(){return i._focus()})("input",function(){return i._onInput()}),2&e&&(t.Ikx("id",i.id),t.uIk("disabled",i.disabled||null)("placeholder",i.placeholder||null)("aria-invalid",i._chipList&&i._chipList.ngControl?i._chipList.ngControl.invalid:null)("aria-required",i._chipList&&i._chipList.required||null))},inputs:{chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[t.TTD]}),n})(),De=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[c.rD,{provide:te,useValue:{separatorKeyCodes:[h.K5]}}],imports:[c.BQ]}),n})();var ie=l(266),S=l(727),Pe=l(9770),Ee=l(9646),Q=l(4968),B=l(8184),ne=l(4098),R=l(4080),V=l(3900),Re=l(8505),Oe=l(1005);const ke=["panel"];function Se(n,o){if(1&n&&(t.TgZ(0,"div",0,1),t.Hsn(2),t.qZA()),2&n){const e=o.id,i=t.oxw();t.Q6J("id",i.id)("ngClass",i._classList),t.uIk("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(e))}}const Be=["*"];let Le=0;class Fe{constructor(o,e){this.source=o,this.option=e}}const He=(0,c.Kr)(class{}),ae=new t.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function Ne(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1}}});let je=(()=>{class n extends He{constructor(e,i,a,s){super(),this._changeDetectorRef=e,this._elementRef=i,this._activeOptionChanges=S.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.optionActivated=new t.vpe,this._classList={},this.id="mat-autocomplete-"+Le++,this.inertGroups=s?.SAFARI||!1,this._autoActiveFirstOption=!!a.autoActiveFirstOption,this._autoSelectActiveOption=!!a.autoSelectActiveOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=(0,_.Ig)(e)}get autoSelectActiveOption(){return this._autoSelectActiveOption}set autoSelectActiveOption(e){this._autoSelectActiveOption=(0,_.Ig)(e)}set classList(e){this._classList=e&&e.length?(0,_.du)(e).reduce((i,a)=>(i[a]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new T.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const i=new Fe(this,e);this.optionSelected.emit(i)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_setVisibilityClasses(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(t.SBq),t.Y36(ae),t.Y36(k.t4))},n.\u0275dir=t.lG2({type:n,viewQuery:function(e,i){if(1&e&&(t.Gf(t.Rgc,7),t.Gf(ke,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.template=a.first),t.iGM(a=t.CRH())&&(i.panel=a.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[t.qOj]}),n})(),Ze=(()=>{class n extends je{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(e,i,a){if(1&e&&(t.Suo(a,c.K7,5),t.Suo(a,c.ey,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.optionGroups=s),t.iGM(s=t.CRH())&&(i.options=s)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[t._Bn([{provide:c.HF,useExisting:n}]),t.qOj],ngContentSelectors:Be,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,i){1&e&&(t.F$t(),t.YNc(0,Se,3,4,"ng-template"))},dependencies:[b.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}"],encapsulation:2,changeDetection:0}),n})();const oe=new t.OlP("mat-autocomplete-scroll-strategy"),Qe={provide:oe,deps:[B.aV],useFactory:function Ye(n){return()=>n.scrollStrategies.reposition()}},Ve={provide:u.JU,useExisting:(0,t.Gpc)(()=>se),multi:!0};let Ge=(()=>{class n{constructor(e,i,a,s,r,d,g,m,f,fi,vi){this._element=e,this._overlay=i,this._viewContainerRef=a,this._zone=s,this._changeDetectorRef=r,this._dir=g,this._formField=m,this._document=f,this._viewportRuler=fi,this._defaults=vi,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=S.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new y.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,Pe.P)(()=>{const L=this.autocomplete?this.autocomplete.options:null;return L?L.changes.pipe((0,M.O)(L),(0,V.w)(()=>(0,C.T)(...L.map(yi=>yi.onSelectionChange)))):this._zone.onStable.pipe((0,P.q)(1),(0,V.w)(()=>this.optionSelections))}),this._scrollStrategy=d}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=(0,_.Ig)(e)}ngAfterViewInit(){const e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,C.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,x.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,x.h)(()=>this._overlayAttached)):(0,Ee.of)()).pipe((0,z.U)(e=>e instanceof c.rN?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,C.T)((0,Q.R)(this._document,"click"),(0,Q.R)(this._document,"auxclick"),(0,Q.R)(this._document,"touchend")).pipe((0,x.h)(e=>{const i=(0,k.sA)(e),a=this._formField?this._formField._elementRef.nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!a||!a.contains(i))&&(!s||!s.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const i=e.keyCode,a=(0,h.Vb)(e);if(i===h.hY&&!a&&e.preventDefault(),this.activeOption&&i===h.K5&&this.panelOpen&&!a)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,r=i===h.LH||i===h.JH;i===h.Mf||r&&!a&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):r&&this._canOpen()&&this.openPanel(),(r||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let i=e.target,a=i.value;"number"===i.type&&(a=""==a?null:parseFloat(a)),this._previousValue!==a&&(this._previousValue=a,this._pendingAutoselectedOption=null,this._onChange(a),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const e=this._zone.onStable.pipe((0,P.q)(1)),i=this.autocomplete.options.changes.pipe((0,Re.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,Oe.g)(0));return(0,C.T)(e,i).pipe((0,V.w)(()=>(this._zone.run(()=>{const a=this.panelOpen;this._resetActiveItem(),this.autocomplete._setVisibility(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),a!==this.panelOpen&&(this.panelOpen?this.autocomplete.opened.emit():this.autocomplete.closed.emit())}),this.panelClosingActions)),(0,P.q)(1)).subscribe(a=>this._setValueAndClose(a))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(e){const i=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e;this._updateNativeInputValue(i??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){const i=e?e.source:this._pendingAutoselectedOption;i&&(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),this.autocomplete._emitSelectEvent(i),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(e){this.autocomplete.options.forEach(i=>{i!==e&&i.selected&&i.deselect()})}_attachOverlay(){let e=this._overlayRef;e?(this._positionStrategy.setOrigin(this._getConnectedElement()),e.updateSize({width:this._getPanelWidth()})):(this._portal=new R.UE(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),e=this._overlay.create(this._getOverlayConfig()),this._overlayRef=e,this._handleOverlayEvents(e),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&e&&e.updateSize({width:this._getPanelWidth()})})),e&&!e.hasAttached()&&(e.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const i=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&i!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){return new B.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],a=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:a},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:a}];let r;r="above"===this.position?s:"below"===this.position?i:[...i,...s],e.withPositions(r)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;e.autoActiveFirstOption?e._keyManager.setFirstItemActive():e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){const i=this.autocomplete,a=(0,c.CB)(e,i.options,i.optionGroups);if(0===e&&1===a)i._setScrollTop(0);else if(i.panel){const s=i.options.toArray()[e];if(s){const r=s._getHostElement(),d=(0,c.jH)(r.offsetTop,r.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(d)}}}_handleOverlayEvents(e){e.keydownEvents().subscribe(i=>{(i.keyCode===h.hY&&!(0,h.Vb)(i)||i.keyCode===h.LH&&(0,h.Vb)(i,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),i.stopPropagation(),i.preventDefault())}),e.outsidePointerEvents().subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(B.aV),t.Y36(t.s_b),t.Y36(t.R0b),t.Y36(t.sBO),t.Y36(oe),t.Y36(J.Is,8),t.Y36(I.G_,9),t.Y36(b.K0,8),t.Y36(ne.rL),t.Y36(ae,8))},n.\u0275dir=t.lG2({type:n,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[t.TTD]}),n})(),se=(()=>{class n extends Ge{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275dir=t.lG2({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,i){1&e&&t.NdJ("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(s){return i._handleInput(s)})("keydown",function(s){return i._handleKeydown(s)})("click",function(){return i._handleClick()}),2&e&&t.uIk("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-owns",i.autocompleteDisabled||!i.panelOpen||null==i.autocomplete?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[t._Bn([Ve]),t.qOj]}),n})(),qe=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[Qe],imports:[B.U8,c.Ng,c.BQ,b.ez,ne.ZD,c.Ng,c.BQ]}),n})();const $e=["tagInput"];function Ue(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip",12),t.NdJ("removed",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.remove(s))}),t._uU(1),t.TgZ(2,"button",13)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.categoryName+"::"+e.name," ")}}function ze(n,o){if(1&n&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.categoryName+"::"+e.name," ")}}const We=function(){return{openTagCategoriesDialog:!0}},Je=function(n){return{selectedTags:n}};let Ke=(()=>{class n{constructor(e,i,a,s){this.tagCategoryService=e,this.data=i,this.cd=a,this.fb=s,this.separatorKeysCodes=[h.K5,h.OC],this.selectedTags=[],this.title=i.title,this.selectedTags=[...i.selectedTags],this.tagCtrl=this.fb.control("")}ngOnInit(){this.filteredTags$=this.tagCtrl.valueChanges.pipe((0,M.O)(""),(0,x.h)(e=>"string"==typeof e),(0,fe.z)(e=>this.tagCategoryService.findTags(e).pipe((0,z.U)(i=>i.content))))}add(e){(e.value||"").trim(),e.chipInput.clear(),this.tagCtrl.setValue("")}remove(e){this.selectedTags=[...this.selectedTags.filter(i=>i.id!==e.id)],this.cd.detectChanges()}selected(e){this.tagInput.nativeElement.value="",this.tagCtrl.setValue(""),this.selectedTags=[...this.selectedTags,e.option.value],this.cd.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O),t.Y36(v.WI),t.Y36(t.sBO),t.Y36(u.j3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-position-tags-dialog"]],viewQuery:function(e,i){if(1&e&&t.Gf($e,5),2&e){let a;t.iGM(a=t.CRH())&&(i.tagInput=a.first)}},decls:22,vars:14,consts:[["mat-dialog-title",""],["mat-icon-button","","matTooltip","Configure Tag Categories",1,"conf-categories-btn",3,"mat-dialog-close"],["appearance","fill",1,"tag-chip-list"],["aria-label","Tag selection"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"formControl","matChipInputFor","matAutocomplete","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-button","",3,"mat-dialog-close"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(e,i){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.TgZ(2,"span")(3,"button",1)(4,"mat-icon"),t._uU(5,"settings_ethernet"),t.qZA()()()(),t.TgZ(6,"mat-dialog-content")(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Position Tags"),t.qZA(),t.TgZ(10,"mat-chip-list",3,4),t.YNc(12,Ue,5,1,"mat-chip",5),t.TgZ(13,"input",6,7),t.NdJ("matChipInputTokenEnd",function(s){return i.add(s)}),t.qZA()(),t.TgZ(15,"mat-autocomplete",8,9),t.NdJ("optionSelected",function(s){return i.selected(s)}),t.YNc(17,ze,2,2,"mat-option",10),t.ALo(18,"async"),t.qZA()()(),t.TgZ(19,"mat-dialog-actions")(20,"button",11),t._uU(21,"Okay"),t.qZA()()),2&e){const a=t.MAs(11),s=t.MAs(16);t.xp6(1),t.hij(" ",i.title,""),t.xp6(2),t.Q6J("mat-dialog-close",t.DdM(11,We)),t.xp6(9),t.Q6J("ngForOf",i.selectedTags),t.xp6(1),t.Q6J("formControl",i.tagCtrl)("matChipInputFor",a)("matAutocomplete",s)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes),t.xp6(4),t.Q6J("ngForOf",t.lcZ(18,9,i.filteredTags$)),t.xp6(3),t.Q6J("mat-dialog-close",t.VKq(12,Je,i.selectedTags))}},dependencies:[b.sg,w.lW,D.Hw,v.ZT,v.uh,v.xY,v.H8,Z,E,Y,j,I.KE,I.hX,u.Fj,u.JJ,u.oH,ie.gM,Ze,se,c.ey,b.Ov],styles:[".tag-chip-list[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),n})();function Xe(n){return`${n.symbol}.${n.exchange}`}let et=0;const G=new t.OlP("CdkAccordion");let tt=(()=>{class n{constructor(){this._stateChanges=new y.x,this._openCloseAllActions=new y.x,this.id="cdk-accordion-"+et++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=(0,_.Ig)(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[t._Bn([{provide:G,useExisting:n}]),t.TTD]}),n})(),it=0,nt=(()=>{class n{constructor(e,i,a){this.accordion=e,this._changeDetectorRef=i,this._expansionDispatcher=a,this._openCloseAllSubscription=S.w0.EMPTY,this.closed=new t.vpe,this.opened=new t.vpe,this.destroyed=new t.vpe,this.expandedChange=new t.vpe,this.id="cdk-accordion-child-"+it++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=a.listen((s,r)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===r&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=(0,_.Ig)(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=(0,_.Ig)(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(G,12),t.Y36(t.sBO),t.Y36(N.A8))},n.\u0275dir=t.lG2({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[t._Bn([{provide:G,useValue:void 0}])]}),n})(),at=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();var ot=l(1884),st=l(515),p=l(7340);const rt=["body"];function lt(n,o){}const ct=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],dt=["mat-expansion-panel-header","*","mat-action-row"];function pt(n,o){if(1&n&&t._UZ(0,"span",2),2&n){const e=t.oxw();t.Q6J("@indicatorRotate",e._getExpandedState())}}const ht=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ut=["mat-panel-title","mat-panel-description","*"],q=new t.OlP("MAT_ACCORDION"),re="225ms cubic-bezier(0.4,0.0,0.2,1)",le={indicatorRotate:(0,p.X$)("indicatorRotate",[(0,p.SB)("collapsed, void",(0,p.oB)({transform:"rotate(0deg)"})),(0,p.SB)("expanded",(0,p.oB)({transform:"rotate(180deg)"})),(0,p.eR)("expanded <=> collapsed, void => collapsed",(0,p.jt)(re))]),bodyExpansion:(0,p.X$)("bodyExpansion",[(0,p.SB)("collapsed, void",(0,p.oB)({height:"0px",visibility:"hidden"})),(0,p.SB)("expanded",(0,p.oB)({height:"*",visibility:"visible"})),(0,p.eR)("expanded <=> collapsed, void => collapsed",(0,p.jt)(re))])},ce=new t.OlP("MAT_EXPANSION_PANEL");let gt=(()=>{class n{constructor(e,i){this._template=e,this._expansionPanel=i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc),t.Y36(ce,8))},n.\u0275dir=t.lG2({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),mt=0;const de=new t.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let pe=(()=>{class n extends nt{constructor(e,i,a,s,r,d,g){super(e,i,a),this._viewContainerRef=s,this._animationMode=d,this._hideToggle=!1,this.afterExpand=new t.vpe,this.afterCollapse=new t.vpe,this._inputChanges=new y.x,this._headerId="mat-expansion-panel-header-"+mt++,this._bodyAnimationDone=new y.x,this.accordion=e,this._document=r,this._bodyAnimationDone.pipe((0,ot.x)((m,f)=>m.fromState===f.fromState&&m.toState===f.toState)).subscribe(m=>{"void"!==m.fromState&&("expanded"===m.toState?this.afterExpand.emit():"collapsed"===m.toState&&this.afterCollapse.emit())}),g&&(this.hideToggle=g.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=(0,_.Ig)(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe((0,M.O)(null),(0,x.h)(()=>this.expanded&&!this._portal),(0,P.q)(1)).subscribe(()=>{this._portal=new R.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,i=this._body.nativeElement;return e===i||i.contains(e)}return!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q,12),t.Y36(t.sBO),t.Y36(N.A8),t.Y36(t.s_b),t.Y36(b.K0),t.Y36(t.QbO,8),t.Y36(de,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(e,i,a){if(1&e&&t.Suo(a,gt,5),2&e){let s;t.iGM(s=t.CRH())&&(i._lazyContent=s.first)}},viewQuery:function(e,i){if(1&e&&t.Gf(rt,5),2&e){let a;t.iGM(a=t.CRH())&&(i._body=a.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,i){2&e&&t.ekj("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[t._Bn([{provide:q,useValue:void 0},{provide:ce,useExisting:n}]),t.qOj,t.TTD],ngContentSelectors:dt,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,i){1&e&&(t.F$t(ct),t.Hsn(0),t.TgZ(1,"div",0,1),t.NdJ("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),t.TgZ(3,"div",2),t.Hsn(4,1),t.YNc(5,lt,0,0,"ng-template",3),t.qZA(),t.Hsn(6,2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("@bodyExpansion",i._getExpandedState())("id",i.id),t.uIk("aria-labelledby",i._headerId),t.xp6(4),t.Q6J("cdkPortalOutlet",i._portal))},dependencies:[R.Pl],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[le.bodyExpansion]},changeDetection:0}),n})(),_t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["mat-action-row"]],hostAttrs:[1,"mat-action-row"]}),n})();class bt{}const ft=(0,c.sb)(bt);let he=(()=>{class n extends ft{constructor(e,i,a,s,r,d,g){super(),this.panel=e,this._element=i,this._focusMonitor=a,this._changeDetectorRef=s,this._animationMode=d,this._parentChangeSubscription=S.w0.EMPTY;const m=e.accordion?e.accordion._stateChanges.pipe((0,x.h)(f=>!(!f.hideToggle&&!f.togglePosition))):st.E;this.tabIndex=parseInt(g||"")||0,this._parentChangeSubscription=(0,C.T)(e.opened,e.closed,m,e._inputChanges.pipe((0,x.h)(f=>!!(f.hideToggle||f.disabled||f.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe((0,x.h)(()=>e._containsFocus())).subscribe(()=>a.focusVia(i,"program")),r&&(this.expandedHeight=r.expandedHeight,this.collapsedHeight=r.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case h.L_:case h.K5:(0,h.Vb)(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,i){e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(pe,1),t.Y36(t.SBq),t.Y36(T.tE),t.Y36(t.sBO),t.Y36(de,8),t.Y36(t.QbO,8),t.$8M("tabindex"))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,i){1&e&&t.NdJ("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&e&&(t.uIk("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),t.Udp("height",i._getHeaderHeight()),t.ekj("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[t.qOj],ngContentSelectors:ut,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,i){1&e&&(t.F$t(ht),t.TgZ(0,"span",0),t.Hsn(1),t.Hsn(2,1),t.Hsn(3,2),t.qZA(),t.YNc(4,pt,1,1,"span",1)),2&e&&(t.ekj("mat-content-hide-toggle",!i._showToggle()),t.xp6(4),t.Q6J("ngIf",i._showToggle()))},dependencies:[b.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[le.indicatorRotate]},changeDetection:0}),n})(),vt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),n})(),yt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),Ct=(()=>{class n extends tt{constructor(){super(...arguments),this._ownHeaders=new t.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=(0,_.Ig)(e)}ngAfterContentInit(){this._headers.changes.pipe((0,M.O)(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(i=>i.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new T.Em(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275dir=t.lG2({type:n,selectors:[["mat-accordion"]],contentQueries:function(e,i,a){if(1&e&&t.Suo(a,he,5),2&e){let s;t.iGM(s=t.CRH())&&(i._headers=s)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("mat-accordion-multi",i.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[t._Bn([{provide:q,useExisting:n}]),t.qOj]}),n})(),xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[b.ez,c.BQ,at,R.eL]}),n})();var Tt=l(4482),Mt=l(5403),ue=l(4144);function At(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip",10),t.NdJ("removed",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.removeTag(r.category,s))}),t._uU(1),t.TgZ(2,"button",11)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}let wt=(()=>{class n{constructor(e){this.fb=e,this.separatorKeysCodes=[h.K5,h.OC],this.categoryDeleted=new t.vpe,this.categoryChanged=new t.vpe}ngOnInit(){this.form=this.fb.group({name:[this.category.name,u.kI.required]}),this.tags=[...this.category.tags],this.form.get("name")?.valueChanges.pipe((0,M.O)(this.category.name),function It(){return(0,Tt.e)((n,o)=>{let e,i=!1;n.subscribe(new Mt.Q(o,a=>{const s=e;e=a,i&&o.next([s,a]),i=!0}))})}()).subscribe(([e,i])=>{this.categoryChanged.emit({name:e,category:{...this.latestCategoryState,name:i}})})}removeTag(e,i){this.tags=[...this.tags.filter(a=>a.id!==i.id)],this.categoryChanged.emit({name:this.form.get("name")?.value,category:this.latestCategoryState})}addTag(e,i){const a=(i.value||"").trim();a&&!this.tags.some(s=>s.name===a)&&(this.tags=[...this.tags,{name:a}],i.chipInput.clear(),this.categoryChanged.emit({name:this.form.get("name")?.value,category:this.latestCategoryState}))}deleteCategory(){this.categoryDeleted.emit(this.latestCategoryState)}get latestCategoryState(){return Object.assign({},this.category,this.form.value,{tags:this.tags})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.j3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tag-category-control"]],inputs:{category:"category"},outputs:{categoryDeleted:"categoryDeleted",categoryChanged:"categoryChanged"},decls:16,vars:6,consts:[[1,"category-control-panel"],[3,"formGroup"],["appearance","fill",1,"category-name"],["matInput","","type","text","id","name","placeholder","Name","formControlName","name","autofocus",""],["appearance","fill",1,"category-tags-list"],["aria-label","Tag selection","multiple",""],["categoriesTags",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","New Tag...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["mat-button","","color","warn",3,"click"],[3,"removed"],["matChipRemove",""]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-expansion-panel",0)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),t._uU(3),t.qZA(),t._UZ(4,"mat-panel-description"),t.qZA(),t.TgZ(5,"form",1)(6,"mat-form-field",2),t._UZ(7,"input",3),t.qZA(),t.TgZ(8,"mat-form-field",4)(9,"mat-chip-list",5,6),t.YNc(11,At,5,1,"mat-chip",7),t.TgZ(12,"input",8),t.NdJ("matChipInputTokenEnd",function(s){return i.addTag(i.category,s)}),t.qZA()()()(),t.TgZ(13,"mat-action-row")(14,"button",9),t.NdJ("click",function(){return i.deleteCategory()}),t._uU(15,"Delete"),t.qZA()()()),2&e){const a=t.MAs(10);let s;t.xp6(3),t.hij(" ",null==(s=i.form.get("name"))?null:s.value," "),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(6),t.Q6J("ngForOf",i.tags),t.xp6(1),t.Q6J("matChipInputFor",a)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",!0)}},dependencies:[b.sg,w.lW,D.Hw,Z,E,Y,j,I.KE,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,pe,_t,he,yt,vt,ue.Nt],styles:[".category-name[_ngcontent-%COMP%], .category-tags-list[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .category-control-panel[_ngcontent-%COMP%]:last-of-type{border-bottom-right-radius:0;border-bottom-left-radius:0;margin-bottom:5px}[_nghost-%COMP%]   .category-control-panel[_ngcontent-%COMP%]:first-of-type{border-top-right-radius:0;border-top-left-radius:0}"],changeDetection:0}),n})();function Dt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-tag-category-control",4),t.NdJ("categoryChanged",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.handleCategoryChanged(a))})("categoryDeleted",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.handleCategoryDeleted(a))}),t.qZA()}2&n&&t.Q6J("category",o.$implicit)}function Pt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-tag-category-control",4),t.NdJ("categoryChanged",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.handleCategoryChanged(a))})("categoryDeleted",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.handleCategoryDeleted(a))}),t.qZA()}2&n&&t.Q6J("category",o.$implicit)}let Et=(()=>{class n{constructor(e,i,a){this.tagCategoryService=e,this.cd=i,this.dialogRef=a,this.separatorKeysCodes=[h.K5,h.OC],this.newCategoryName="New Tag Category",this.categoriesToDelete=[]}ngOnInit(){this.tagCategoryService.getTagCategories().subscribe(e=>{this.persistedCategories=e,this.newCategories=[],this.categoriesState=JSON.parse(JSON.stringify(this.persistedCategories)),this.cd.detectChanges()})}onOkayClick(){const e=this.categoriesState.filter(s=>!s.id),i=this.persistedCategories.reduce((s,r)=>({...s,[r.id]:r}),{}),a=this.categoriesState.filter(s=>!!s.id&&JSON.stringify(s)!==JSON.stringify(i[s.id]));this.dialogRef.close({add:e,update:a,delete:this.categoriesToDelete})}addCategory(){const e={id:null,name:this.generateNewCategoryName(),color:"#999",tags:[]};this.newCategories=[e,...this.newCategories],this.categoriesState=[e,...this.categoriesState],this.cd.detectChanges()}generateNewCategoryName(){const e=this.categoriesState.find(a=>a.name.startsWith(this.newCategoryName));if(!e)return this.newCategoryName;let i;return i=e.name===this.newCategoryName?" 2":" "+(+e.name[e.name.length-1]+1),this.newCategoryName+i}handleCategoryChanged({name:e,category:i}){this.categoriesState=this.categoriesState.map(a=>a.name===e?i:a)}handleCategoryDeleted(e){e.id&&(this.categoriesToDelete=[...this.categoriesToDelete,e.id]),this.newCategories=[...this.newCategories.filter(i=>i.name!==e.name)],this.persistedCategories=[...this.persistedCategories.filter(i=>i.name!==e.name)],this.categoriesState=[...this.categoriesState.filter(i=>i.name!==e.name)],this.cd.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O),t.Y36(t.sBO),t.Y36(v.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tag-categories-dialog"]],decls:13,vars:3,consts:[["mat-dialog-title","",1,"dialog-title"],["mat-button","",1,"add-category-btn",3,"click"],[3,"category","categoryChanged","categoryDeleted",4,"ngFor","ngForOf"],["mat-button","",3,"click"],[3,"category","categoryChanged","categoryDeleted"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return i.addCategory()}),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA()()(),t.TgZ(6,"mat-dialog-content")(7,"mat-accordion"),t.YNc(8,Dt,1,1,"app-tag-category-control",2),t.YNc(9,Pt,1,1,"app-tag-category-control",2),t.qZA()(),t.TgZ(10,"mat-dialog-actions")(11,"button",3),t.NdJ("click",function(){return i.onOkayClick()}),t._uU(12,"Okay"),t.qZA()()),2&e&&(t.xp6(2),t.Oqu("Tag Categories"),t.xp6(6),t.Q6J("ngForOf",i.newCategories),t.xp6(1),t.Q6J("ngForOf",i.persistedCategories))},dependencies:[b.sg,w.lW,D.Hw,v.uh,v.xY,v.H8,Ct,wt],styles:[".spinner-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.dialog-title[_ngcontent-%COMP%]{display:inline-flex}.dialog-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}"],changeDetection:0}),n})();var Rt=l(4128);let ge=(()=>{class n{constructor(e){this.http=e}getPortfolioPositions(){return this.http.get("/portfolio-positions")}getPortfolioPositionsView(e){return this.http.get(`/portfolio-positions/view?hideSold=${e}`)}updatePositionTags(e,i){return this.http.post(`/portfolio-positions/${e}/tags`,i)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(W.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),Ot=0;const kt=(0,c.Id)(class{}),me="mat-badge-content";let St=(()=>{class n extends kt{constructor(e,i,a,s,r){super(),this._ngZone=e,this._elementRef=i,this._ariaDescriber=a,this._renderer=s,this._animationMode=r,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=Ot++,this._isInitialized=!1}get color(){return this._color}set color(e){this._setColor(e),this._color=e}get overlap(){return this._overlap}set overlap(e){this._overlap=(0,_.Ig)(e)}get content(){return this._content}set content(e){this._updateRenderedContent(e)}get description(){return this._description}set description(e){this._updateHostAriaDescription(e)}get hidden(){return this._hidden}set hidden(e){this._hidden=(0,_.Ig)(e)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&this._renderer.destroyNode(this._badgeElement),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_createBadgeElement(){const e=this._renderer.createElement("span"),i="mat-badge-active";return e.setAttribute("id",`mat-badge-content-${this._id}`),e.setAttribute("aria-hidden","true"),e.classList.add(me),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(i)})}):e.classList.add(i),e}_updateRenderedContent(e){const i=`${e??""}`.trim();this._isInitialized&&i&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=i),this._content=i}_updateHostAriaDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),e&&this._ariaDescriber.describe(this._elementRef.nativeElement,e),this._description=e}_setColor(e){const i=this._elementRef.nativeElement.classList;i.remove(`mat-badge-${this._color}`),e&&i.add(`mat-badge-${e}`)}_clearExistingBadges(){const e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${me}`);for(const i of Array.from(e))i!==this._badgeElement&&i.remove()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(T.$s),t.Y36(t.Qsj),t.Y36(t.QbO,8))},n.\u0275dir=t.lG2({type:n,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,i){2&e&&t.ekj("mat-badge-overlap",i.overlap)("mat-badge-above",i.isAbove())("mat-badge-below",!i.isAbove())("mat-badge-before",!i.isAfter())("mat-badge-after",i.isAfter())("mat-badge-small","small"===i.size)("mat-badge-medium","medium"===i.size)("mat-badge-large","large"===i.size)("mat-badge-hidden",i.hidden||!i.content)("mat-badge-disabled",i.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden"]},features:[t.qOj]}),n})(),Bt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[T.rt,c.BQ,c.BQ]}),n})();var $=l(9643);const Lt=["input"],Ft=function(n){return{enterDuration:n}},Ht=["*"],Nt=new t.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let jt=0;const Zt={provide:u.JU,useExisting:(0,t.Gpc)(()=>_e),multi:!0};class Yt{constructor(o,e){this.source=o,this.checked=e}}const Qt=(0,c.sb)((0,c.pj)((0,c.Kr)((0,c.Id)(class{constructor(n){this._elementRef=n}}))));let Vt=(()=>{class n extends Qt{constructor(e,i,a,s,r,d,g){super(e),this._focusMonitor=i,this._changeDetectorRef=a,this.defaults=r,this._onChange=m=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new t.vpe,this.toggleChange=new t.vpe,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=r.color||"accent",this._noopAnimations="NoopAnimations"===d,this.id=this._uniqueId=`${g}${++jt}`}get required(){return this._required}set required(e){this._required=(0,_.Ig)(e)}get checked(){return this._checked}set checked(e){this._checked=(0,_.Ig)(e),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{"keyboard"===e||"program"===e?this._focused=!0:e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return n.\u0275fac=function(e){t.$Z()},n.\u0275dir=t.lG2({type:n,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[t.qOj]}),n})(),_e=(()=>{class n extends Vt{constructor(e,i,a,s,r,d){super(e,i,a,s,r,d,"mat-slide-toggle-")}_createChangeEvent(e){return new Yt(this,e)}_onChangeEvent(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(e){e.stopPropagation()}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(T.tE),t.Y36(t.sBO),t.$8M("tabindex"),t.Y36(Nt),t.Y36(t.QbO,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(e,i){if(1&e&&t.Gf(Lt,5),2&e){let a;t.iGM(a=t.CRH())&&(i._inputElement=a.first)}},hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:function(e,i){2&e&&(t.Ikx("id",i.id),t.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),t.ekj("mat-checked",i.checked)("mat-disabled",i.disabled)("mat-slide-toggle-label-before","before"==i.labelPosition)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[t._Bn([Zt]),t.qOj],ngContentSelectors:Ht,decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,i){if(1&e&&(t.F$t(),t.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),t.NdJ("change",function(s){return i._onChangeEvent(s)})("click",function(s){return i._onInputClick(s)}),t.qZA(),t.TgZ(5,"span",5),t._UZ(6,"span",6),t.TgZ(7,"span",7),t._UZ(8,"span",8),t.qZA()()(),t.TgZ(9,"span",9,10),t.NdJ("cdkObserveContent",function(){return i._onLabelTextChange()}),t.TgZ(11,"span",11),t._uU(12,"\xa0"),t.qZA(),t.Hsn(13),t.qZA()()),2&e){const a=t.MAs(1),s=t.MAs(10);t.uIk("for",i.inputId),t.xp6(2),t.ekj("mat-slide-toggle-bar-no-side-margin",!s.textContent||!s.textContent.trim()),t.xp6(1),t.Q6J("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex)("checked",i.checked)("disabled",i.disabled),t.uIk("name",i.name)("aria-checked",i.checked)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),t.xp6(4),t.Q6J("matRippleTrigger",a)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",t.VKq(18,Ft,i._noopAnimations?0:150))}},dependencies:[c.wG,$.wD],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0}),n})(),be=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),$t=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[be,c.si,c.BQ,$.Q8,be,c.BQ]}),n})();function Ut(n,o){if(1&n&&(t.TgZ(0,"div",7)(1,"a",8),t._uU(2),t.qZA(),t.TgZ(3,"div",9),t._uU(4),t.qZA()()),2&n){const e=o.row;t.xp6(1),t.Q6J("routerLink","/symbols/"+e.identifier.exchange+"-"+e.identifier.symbol),t.xp6(1),t.Oqu(e.identifier.symbol),t.xp6(2),t.Oqu(e.companyName)}}function zt(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",12),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw().row,r=t.oxw();return t.KtG(r.openPositionTagsDialog(a,s))}),t.TgZ(2,"mat-icon"),t._uU(3,"library_add"),t.qZA()(),t.BQk()}}function Wt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw().row,r=t.oxw();return t.KtG(r.openPositionTagsDialog(a,s))}),t.TgZ(1,"mat-icon",13),t._uU(2,"tag"),t.qZA(),t.TgZ(3,"span",14),t._uU(4),t.qZA()()}if(2&n){const e=t.oxw().row;t.xp6(1),t.Q6J("matBadge",e.tags.length),t.xp6(3),t.Oqu(e.tags.length+" tags linked to this position")}}function Jt(n,o){if(1&n&&(t.YNc(0,zt,4,0,"ng-container",10),t.YNc(1,Wt,5,2,"ng-template",null,11,t.W1O)),2&n){const e=o.row,i=t.MAs(2);t.Q6J("ngIf",0===e.tags.length)("ngIfElse",i)}}function Kt(n,o){if(1&n&&(t._uU(0),t.ALo(1,"currency")),2&n){const e=o.row;t.hij(" ",t.xi3(1,1,e.price,e.currencyCode)," ")}}function Xt(n,o){1&n&&t._uU(0),2&n&&t.hij(" ",o.value+"%"," ")}function ei(n,o){if(1&n&&(t._uU(0),t.ALo(1,"currency")),2&n){const e=o.row;t.hij(" ",t.xi3(1,1,e.total,e.currencyCode)," ")}}function ti(n,o){if(1&n&&(t._uU(0),t.ALo(1,"currency")),2&n){const e=o.row;t.hij(" ",t.xi3(1,1,e.marketValue,e.currencyCode)," ")}}function ii(n,o){1&n&&t._uU(0),2&n&&t.hij(" ",o.row.yieldOnCost+"%"," ")}function ni(n,o){if(1&n&&(t._uU(0),t.ALo(1,"currency")),2&n){const e=o.row;t.hij(" ",t.xi3(1,1,e.accumulatedDividends,e.currencyCode)," ")}}function ai(n,o){if(1&n&&(t._uU(0),t.ALo(1,"currency")),2&n){const e=o.row;t.hij(" ",t.xi3(1,1,e.realizedPnl,e.currencyCode)," ")}}function oi(n,o){1&n&&(t.TgZ(0,"ngx-datatable-column",5),t.YNc(1,ai,2,4,"ng-template",4),t.qZA()),2&n&&t.Q6J("prop","realizedPnl")("name","Realized P&L")}const si=function(){return{prop:"pctOfPortfolio",dir:"desc"}},ri=function(n){return[n]},li=[{path:"",component:(()=>{class n{constructor(e,i,a){this.portfolioPositionService=e,this.tagCategoryService=i,this.matDialog=a,this.headerHeight=50,this.footerHeight=50,this.rowHeight=60,this.pageLimit=30,this.ColumnMode=A.hq,this.hideSoldPositions=!0,this.positions$=this.getPortfolioPositions()}ngOnInit(){}openPositionTagsDialog(e,i){this.matDialog.open(Ke,{restoreFocus:!1,disableClose:!1,data:{title:`${Xe(i.identifier)} Position Tags`,selectedTags:i.tags}}).afterClosed().subscribe(s=>{if(!s)return;if(s.openTagCategoriesDialog)return void this.matDialog.open(Et,this.getTagCategoriesDialogConfig()).afterClosed().subscribe(m=>{m&&(m.add.length>0||m.update.length>0||m.delete.length>0)&&this.propagateTagCategoriesChanges(m)});const r=s.selectedTags;if(!r||JSON.stringify(r)===JSON.stringify(i.tags))return;const d=r.map(g=>g.id);this.portfolioPositionService.updatePositionTags(i.id,d).subscribe(()=>{this.positions$=this.getPortfolioPositions()})})}getTagCategoriesDialogConfig(){return{restoreFocus:!1,disableClose:!1}}propagateTagCategoriesChanges(e){const i=e.update.map(r=>this.tagCategoryService.updateTagCategory(r)),a=e.add.map(r=>this.tagCategoryService.createTagCategory(r)),s=e.delete.map(r=>this.tagCategoryService.deleteTagCategory(r));(0,Rt.D)([...i,...a,...s]).subscribe(()=>{this.positions$=this.getPortfolioPositions()})}getPortfolioPositions(){return this.portfolioPositionService.getPortfolioPositionsView(this.hideSoldPositions)}onHideSoldToggled({}){this.positions$=this.getPortfolioPositions()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ge),t.Y36(O),t.Y36(v.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-positions-container"]],decls:24,vars:33,consts:[[1,"positions-header"],[3,"ngModel","ngModelChange","change"],[1,"material",3,"rows","columnMode","headerHeight","rowHeight","limit","footerHeight","sorts"],[3,"prop"],["ngx-datatable-cell-template",""],[3,"prop","name"],[3,"prop","name",4,"ngIf"],[1,"identifier"],[1,"identifier-symbol",3,"routerLink"],[1,"identifier-company"],[4,"ngIf","ngIfElse"],["tags",""],["mat-button","",3,"click"],["matBadgeColor","warn",3,"matBadge"],[1,"cdk-visually-hidden"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-slide-toggle",1),t.NdJ("ngModelChange",function(s){return i.hideSoldPositions=s})("change",function(s){return i.onHideSoldToggled(s)}),t._uU(2,"Hide Sold"),t.qZA()(),t.TgZ(3,"ngx-datatable",2),t.ALo(4,"async"),t.TgZ(5,"ngx-datatable-column",3),t.YNc(6,Ut,5,3,"ng-template",4),t.qZA(),t.TgZ(7,"ngx-datatable-column",5),t.YNc(8,Jt,3,2,"ng-template",4),t.qZA(),t._UZ(9,"ngx-datatable-column",5),t.TgZ(10,"ngx-datatable-column",5),t.YNc(11,Kt,2,4,"ng-template",4),t.qZA(),t.TgZ(12,"ngx-datatable-column",5),t.YNc(13,Xt,1,1,"ng-template",4),t.qZA(),t.TgZ(14,"ngx-datatable-column",5),t.YNc(15,ei,2,4,"ng-template",4),t.qZA(),t.TgZ(16,"ngx-datatable-column",5),t.YNc(17,ti,2,4,"ng-template",4),t.qZA(),t.TgZ(18,"ngx-datatable-column",5),t.YNc(19,ii,1,1,"ng-template",4),t.qZA(),t.TgZ(20,"ngx-datatable-column",5),t.YNc(21,ni,2,4,"ng-template",4),t.qZA(),t._UZ(22,"ngx-datatable-column",5),t.YNc(23,oi,2,2,"ngx-datatable-column",6),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngModel",i.hideSoldPositions),t.xp6(2),t.Q6J("rows",t.lcZ(4,28,i.positions$))("columnMode",i.ColumnMode.standard)("headerHeight",i.headerHeight)("rowHeight",i.rowHeight)("limit",i.pageLimit)("footerHeight",i.footerHeight)("sorts",t.VKq(31,ri,t.DdM(30,si))),t.xp6(2),t.Q6J("prop","identifier"),t.xp6(2),t.Q6J("prop","tags")("name","Tags"),t.xp6(2),t.Q6J("prop","quantity")("name","Shares"),t.xp6(1),t.Q6J("prop","price")("name","Cost Per Share"),t.xp6(2),t.Q6J("prop","pctOfPortfolio")("name","% of Portfolio"),t.xp6(2),t.Q6J("prop","total")("name","Total Cost"),t.xp6(2),t.Q6J("prop","marketValue")("name","Market Value"),t.xp6(2),t.Q6J("prop","yieldOnCost")("name","Yield On Cost"),t.xp6(2),t.Q6J("prop","accumulatedDividends")("name","Accumulated Dividends"),t.xp6(2),t.Q6J("prop","upcomingDividendDate")("name","Upcoming Dividend Date"),t.xp6(1),t.Q6J("ngIf",!i.hideSoldPositions))},dependencies:[b.O5,F.yS,A.nE,A.UC,A.vq,w.lW,D.Hw,u.JJ,St,_e,u.On,b.Ov,b.H9],styles:[".positions-header[_ngcontent-%COMP%]{display:flex;margin:5px;justify-content:flex-end}.identifier-company[_ngcontent-%COMP%]{font-size:small}"],changeDetection:0}),n})()}];let ci=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[F.Bz.forChild(li),F.Bz]}),n})(),gi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[b.ez,c.BQ,R.eL,c.si,$.Q8,T.rt,c.BQ]}),n})();var mi=l(1572),_i=l(3546);let bi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[ge,O],imports:[b.ez,ci,A.xD,w.ot,D.Ps,v.Is,gi,De,I.lN,u.UX,ie.AV,mi.Cq,Bt,qe,_i.QW,$t,u.u5,xt,ue.c]}),n})()}}]);