"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([[256],{256:(gt,F,r)=>{r.r(F),r.d(F,{PortfolioPositionsModule:()=>ut});var m=r(6895),H=r(4364),y=r(9585),B=r(8675),x=r(9300),oe=r(5577),N=r(4004),v=r(5412),h=r(9521),i=r(4650),j=r(529);let V=(()=>{class a{constructor(e){this.http=e}getTagCategories(){return this.http.get("/tag-categories")}getTagsByCategory(e){return this.http.get(`/tag-categories/${e}/tags`)}addTagToCategory(e,t){return this.http.post(`/tag-categories/${e}/tags`,null,{params:{tag:t}})}deleteCategoryTag(e,t){return this.http.delete(`/tag-categories/${e}/tags/${t}`)}findTags(e){return this.http.get(`/tag-categories/tags/search?searchTerm=${e}`)}}return a.\u0275fac=function(e){return new(e||a)(i.LFG(j.eN))},a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac}),a})();var b=r(4006),O=r(4859),E=r(7392),c=r(3238),p=r(1281),I=r(3353),T=r(7579),g=r(6451),A=r(5698),S=r(2722),C=r(2687),Q=r(445),se=r(5017),M=r(9549);const re=["*"],Y=new i.OlP("MatChipRemove"),G=new i.OlP("MatChipAvatar"),Z=new i.OlP("MatChipTrailingIcon");class le{constructor(o){this._elementRef=o}}const ce=(0,c.sb)((0,c.pj)((0,c.Kr)(le),"primary"),-1);let w=(()=>{class a extends ce{constructor(e,t,n,s,l,d,u,f){super(e),this._ngZone=t,this._changeDetectorRef=l,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this.role="option",this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new T.x,this._onBlur=new T.x,this.selectionChange=new i.vpe,this.destroyed=new i.vpe,this.removed=new i.vpe,this._addHostClassName(),this._chipRippleTarget=d.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new c.IR(this,t,this._chipRippleTarget,n),this._chipRipple.setupTriggerEvents(e),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===u,this.tabIndex=null!=f&&parseInt(f)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(e){const t=(0,p.Ig)(e);t!==this._selected&&(this._selected=t,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(e){this._value=e}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(e){this._selectable=(0,p.Ig)(e)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(e){this._disabled=(0,p.Ig)(e)}get removable(){return this._removable}set removable(e){this._removable=(0,p.Ig)(e)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const e="mat-basic-chip",t=this._elementRef.nativeElement;t.hasAttribute(e)||t.tagName.toLowerCase()===e?t.classList.add(e):t.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(e=!1){return this._selected=!this.selected,this._dispatchSelectionChange(e),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(e){this.disabled&&e.preventDefault()}_handleKeydown(e){if(!this.disabled)switch(e.keyCode){case h.yY:case h.ZH:this.remove(),e.preventDefault();break;case h.L_:this.selectable&&this.toggleSelected(!0),e.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,A.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(e=!1){this.selectionChange.emit({source:this,isUserInput:e,selected:this._selected})}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(i.SBq),i.Y36(i.R0b),i.Y36(I.t4),i.Y36(c.Y2,8),i.Y36(i.sBO),i.Y36(m.K0),i.Y36(i.QbO,8),i.$8M("tabindex"))},a.\u0275dir=i.lG2({type:a,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(e,t,n){if(1&e&&(i.Suo(n,G,5),i.Suo(n,Z,5),i.Suo(n,Y,5)),2&e){let s;i.iGM(s=i.CRH())&&(t.avatar=s.first),i.iGM(s=i.CRH())&&(t.trailingIcon=s.first),i.iGM(s=i.CRH())&&(t.removeIcon=s.first)}},hostAttrs:[1,"mat-chip","mat-focus-indicator"],hostVars:15,hostBindings:function(e,t){1&e&&i.NdJ("click",function(s){return t._handleClick(s)})("keydown",function(s){return t._handleKeydown(s)})("focus",function(){return t.focus()})("blur",function(){return t._blur()}),2&e&&(i.uIk("tabindex",t.disabled?null:t.tabIndex)("role",t.role)("disabled",t.disabled||null)("aria-disabled",t.disabled.toString())("aria-selected",t.ariaSelected),i.ekj("mat-chip-selected",t.selected)("mat-chip-with-avatar",t.avatar)("mat-chip-with-trailing-icon",t.trailingIcon||t.removeIcon)("mat-chip-disabled",t.disabled)("_mat-animation-noopable",t._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",role:"role",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[i.qOj]}),a})(),W=(()=>{class a{constructor(e,t){this._parentChip=e,"BUTTON"===t.nativeElement.nodeName&&t.nativeElement.setAttribute("type","button")}_handleClick(e){const t=this._parentChip;t.removable&&!t.disabled&&t.remove(),e.stopPropagation(),e.preventDefault()}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(w),i.Y36(i.SBq))},a.\u0275dir=i.lG2({type:a,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(e,t){1&e&&i.NdJ("click",function(s){return t._handleClick(s)})},features:[i._Bn([{provide:Y,useExisting:a}])]}),a})();const z=new i.OlP("mat-chips-default-options"),pe=(0,c.FD)(class{constructor(a,o,e,t){this._defaultErrorStateMatcher=a,this._parentForm=o,this._parentFormGroup=e,this.ngControl=t,this.stateChanges=new T.x}});let ue=0;class _e{constructor(o,e){this.source=o,this.value=e}}let $=(()=>{class a extends pe{constructor(e,t,n,s,l,d,u){super(d,s,l,u),this._elementRef=e,this._changeDetectorRef=t,this._dir=n,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new T.x,this._uid="mat-chip-list-"+ue++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(f,D)=>f===D,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new i.vpe,this.valueChange=new i.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get role(){return this._explicitRole?this._explicitRole:this.empty?null:"listbox"}set role(e){this._explicitRole=e}get multiple(){return this._multiple}set multiple(e){this._multiple=(0,p.Ig)(e),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this.writeValue(e),this._value=e}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(b.kI.required)??!1}set required(e){this._required=(0,p.Ig)(e),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=(0,p.Ig)(e),this._syncChipsState()}get selectable(){return this._selectable}set selectable(e){this._selectable=(0,p.Ig)(e),this._syncChipsState()}set tabIndex(e){this._userTabIndex=e,this._tabIndex=e}get chipSelectionChanges(){return(0,g.T)(...this.chips.map(e=>e.selectionChange))}get chipFocusChanges(){return(0,g.T)(...this.chips.map(e=>e._onFocus))}get chipBlurChanges(){return(0,g.T)(...this.chips.map(e=>e._onBlur))}get chipRemoveChanges(){return(0,g.T)(...this.chips.map(e=>e.destroyed))}ngAfterContentInit(){this._keyManager=new C.Em(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe((0,S.R)(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.tabOut.pipe((0,S.R)(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe((0,B.O)(null),(0,S.R)(this._destroyed)).subscribe(()=>{(this.disabled||!this.selectable)&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new se.Ov(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(e){this._chipInput=e,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",e.id)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}writeValue(e){this.chips&&this._setSelectionByValue(e,!1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this.stateChanges.next()}onContainerClick(e){this._originatesFromChip(e)||this.focus()}focus(e){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(e),this.stateChanges.next()))}_focusInput(e){this._chipInput&&this._chipInput.focus(e)}_keydown(e){const t=e.target;t&&t.classList.contains("mat-chip")&&(this._keyManager.onKeydown(e),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const e=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(e)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(e){return e>=0&&e<this.chips.length}_setSelectionByValue(e,t=!0){if(this._clearSelection(),this.chips.forEach(n=>n.deselect()),Array.isArray(e))e.forEach(n=>this._selectValue(n,t)),this._sortValues();else{const n=this._selectValue(e,t);n&&t&&this._keyManager.setActiveItem(n)}}_selectValue(e,t=!0){const n=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,e));return n&&(t?n.selectViaInteraction():n.select(),this._selectionModel.select(n)),n}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(e){this._selectionModel.clear(),this.chips.forEach(t=>{t!==e&&t.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(e=>{e.selected&&this._selectionModel.select(e)}),this.stateChanges.next())}_propagateChanges(e){let t=null;t=Array.isArray(this.selected)?this.selected.map(n=>n.value):this.selected?this.selected.value:e,this._value=t,this.change.emit(new _e(this,t)),this.valueChange.emit(t),this._onChange(t),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(e=>{e.source.selected?this._selectionModel.select(e.source):this._selectionModel.deselect(e.source),this.multiple||this.chips.forEach(t=>{!this._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),e.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(e=>{let t=this.chips.toArray().indexOf(e.chip);this._isValidIndex(t)&&this._keyManager.updateActiveItem(t),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(e=>{const t=e.chip,n=this.chips.toArray().indexOf(e.chip);this._isValidIndex(n)&&t._hasFocus&&(this._lastDestroyedChipIndex=n)})}_originatesFromChip(e){let t=e.target;for(;t&&t!==this._elementRef.nativeElement;){if(t.classList.contains("mat-chip"))return!0;t=t.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(e=>e._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(e=>{e._chipListDisabled=this._disabled,e._chipListMultiple=this.multiple,e.chipListSelectable=this._selectable})}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(Q.Is,8),i.Y36(b.F,8),i.Y36(b.sg,8),i.Y36(c.rD),i.Y36(b.a5,10))},a.\u0275cmp=i.Xpm({type:a,selectors:[["mat-chip-list"]],contentQueries:function(e,t,n){if(1&e&&i.Suo(n,w,5),2&e){let s;i.iGM(s=i.CRH())&&(t.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:14,hostBindings:function(e,t){1&e&&i.NdJ("focus",function(){return t.focus()})("blur",function(){return t._blur()})("keydown",function(s){return t._keydown(s)}),2&e&&(i.Ikx("id",t._uid),i.uIk("tabindex",t.disabled?null:t._tabIndex)("aria-required",t.role?t.required:null)("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-multiselectable",t.multiple)("role",t.role)("aria-orientation",t.ariaOrientation),i.ekj("mat-chip-list-disabled",t.disabled)("mat-chip-list-invalid",t.errorState)("mat-chip-list-required",t.required))},inputs:{role:"role",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[i._Bn([{provide:M.Eo,useExisting:a}]),i.qOj],ngContentSelectors:re,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.Hsn(1),i.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-chip::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}.mat-standard-chip._mat-animation-noopable{transition:none !important;animation:none !important}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}'],encapsulation:2,changeDetection:0}),a})(),me=0,U=(()=>{class a{constructor(e,t){this._elementRef=e,this._defaultOptions=t,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new i.vpe,this.placeholder="",this.id="mat-chip-list-input-"+me++,this._disabled=!1,this.inputElement=this._elementRef.nativeElement}set chipList(e){e&&(this._chipList=e,this._chipList.registerInput(this))}get addOnBlur(){return this._addOnBlur}set addOnBlur(e){this._addOnBlur=(0,p.Ig)(e)}get disabled(){return this._disabled||this._chipList&&this._chipList.disabled}set disabled(e){this._disabled=(0,p.Ig)(e)}get empty(){return!this.inputElement.value}ngOnChanges(){this._chipList.stateChanges.next()}ngOnDestroy(){this.chipEnd.complete()}ngAfterContentInit(){this._focusLastChipOnBackspace=this.empty}_keydown(e){if(e){if(e.keyCode===h.Mf&&!(0,h.Vb)(e,"shiftKey")&&this._chipList._allowFocusEscape(),e.keyCode===h.ZH&&this._focusLastChipOnBackspace)return this._chipList._keyManager.setLastItemActive(),void e.preventDefault();this._focusLastChipOnBackspace=!1}this._emitChipEnd(e)}_keyup(e){!this._focusLastChipOnBackspace&&e.keyCode===h.ZH&&this.empty&&(this._focusLastChipOnBackspace=!0,e.preventDefault())}_blur(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}_focus(){this.focused=!0,this._focusLastChipOnBackspace=this.empty,this._chipList.stateChanges.next()}_emitChipEnd(e){!this.inputElement.value&&!!e&&this._chipList._keydown(e),(!e||this._isSeparatorKey(e))&&(this.chipEnd.emit({input:this.inputElement,value:this.inputElement.value,chipInput:this}),e?.preventDefault())}_onInput(){this._chipList.stateChanges.next()}focus(e){this.inputElement.focus(e)}clear(){this.inputElement.value="",this._focusLastChipOnBackspace=!0}_isSeparatorKey(e){return!(0,h.Vb)(e)&&new Set(this.separatorKeyCodes).has(e.keyCode)}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(i.SBq),i.Y36(z))},a.\u0275dir=i.lG2({type:a,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(e,t){1&e&&i.NdJ("keydown",function(s){return t._keydown(s)})("keyup",function(s){return t._keyup(s)})("blur",function(){return t._blur()})("focus",function(){return t._focus()})("input",function(){return t._onInput()}),2&e&&(i.Ikx("id",t.id),i.uIk("disabled",t.disabled||null)("placeholder",t.placeholder||null)("aria-invalid",t._chipList&&t._chipList.ngControl?t._chipList.ngControl.invalid:null)("aria-required",t._chipList&&t._chipList.required||null))},inputs:{chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[i.TTD]}),a})(),be=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({providers:[c.rD,{provide:z,useValue:{separatorKeyCodes:[h.K5]}}],imports:[c.BQ]}),a})();var K=r(266),q=r(727),ge=r(9770),fe=r(9646),k=r(4968),R=r(8184),J=r(5589),X=r(4080),L=r(3900),ve=r(8505),ye=r(1005);const Te=["panel"];function Ce(a,o){if(1&a&&(i.TgZ(0,"div",0,1),i.Hsn(2),i.qZA()),2&a){const e=o.id,t=i.oxw();i.Q6J("id",t.id)("ngClass",t._classList),i.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby(e))}}const Me=["*"];let xe=0;class Ie{constructor(o,e){this.source=o,this.option=e}}const Ae=(0,c.Kr)(class{}),ee=new i.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function we(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1}}});let Re=(()=>{class a extends Ae{constructor(e,t,n,s){super(),this._changeDetectorRef=e,this._elementRef=t,this._activeOptionChanges=q.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new i.vpe,this.opened=new i.vpe,this.closed=new i.vpe,this.optionActivated=new i.vpe,this._classList={},this.id="mat-autocomplete-"+xe++,this.inertGroups=s?.SAFARI||!1,this._autoActiveFirstOption=!!n.autoActiveFirstOption,this._autoSelectActiveOption=!!n.autoSelectActiveOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=(0,p.Ig)(e)}get autoSelectActiveOption(){return this._autoSelectActiveOption}set autoSelectActiveOption(e){this._autoSelectActiveOption=(0,p.Ig)(e)}set classList(e){this._classList=e&&e.length?(0,p.du)(e).reduce((t,n)=>(t[n]=!0,t),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new C.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const t=new Ie(this,e);this.optionSelected.emit(t)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_setVisibilityClasses(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(i.sBO),i.Y36(i.SBq),i.Y36(ee),i.Y36(I.t4))},a.\u0275dir=i.lG2({type:a,viewQuery:function(e,t){if(1&e&&(i.Gf(i.Rgc,7),i.Gf(Te,5)),2&e){let n;i.iGM(n=i.CRH())&&(t.template=n.first),i.iGM(n=i.CRH())&&(t.panel=n.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",autoSelectActiveOption:"autoSelectActiveOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[i.qOj]}),a})(),De=(()=>{class a extends Re{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return a.\u0275fac=function(){let o;return function(t){return(o||(o=i.n5z(a)))(t||a)}}(),a.\u0275cmp=i.Xpm({type:a,selectors:[["mat-autocomplete"]],contentQueries:function(e,t,n){if(1&e&&(i.Suo(n,c.K7,5),i.Suo(n,c.ey,5)),2&e){let s;i.iGM(s=i.CRH())&&(t.optionGroups=s),i.iGM(s=i.CRH())&&(t.options=s)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[i._Bn([{provide:c.HF,useExisting:a}]),i.qOj],ngContentSelectors:Me,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,t){1&e&&(i.F$t(),i.YNc(0,Ce,3,4,"ng-template"))},dependencies:[m.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}"],encapsulation:2,changeDetection:0}),a})();const te=new i.OlP("mat-autocomplete-scroll-strategy"),Be={provide:te,deps:[R.aV],useFactory:function Pe(a){return()=>a.scrollStrategies.reposition()}},Oe={provide:b.JU,useExisting:(0,i.Gpc)(()=>ie),multi:!0};let Ee=(()=>{class a{constructor(e,t,n,s,l,d,u,f,D,_t,mt){this._element=e,this._overlay=t,this._viewContainerRef=n,this._zone=s,this._changeDetectorRef=l,this._dir=u,this._formField=f,this._document=D,this._viewportRuler=_t,this._defaults=mt,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=q.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new T.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,ge.P)(()=>{const P=this.autocomplete?this.autocomplete.options:null;return P?P.changes.pipe((0,B.O)(P),(0,L.w)(()=>(0,g.T)(...P.map(bt=>bt.onSelectionChange)))):this._zone.onStable.pipe((0,A.q)(1),(0,L.w)(()=>this.optionSelections))}),this._scrollStrategy=d}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=(0,p.Ig)(e)}ngAfterViewInit(){const e=this._getWindow();typeof e<"u"&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();typeof e<"u"&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,g.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,x.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,x.h)(()=>this._overlayAttached)):(0,fe.of)()).pipe((0,N.U)(e=>e instanceof c.rN?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,g.T)((0,k.R)(this._document,"click"),(0,k.R)(this._document,"auxclick"),(0,k.R)(this._document,"touchend")).pipe((0,x.h)(e=>{const t=(0,I.sA)(e),n=this._formField?this._formField._elementRef.nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&t!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!n||!n.contains(t))&&(!s||!s.contains(t))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(t)}))}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const t=e.keyCode,n=(0,h.Vb)(e);if(t===h.hY&&!n&&e.preventDefault(),this.activeOption&&t===h.K5&&this.panelOpen&&!n)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,l=t===h.LH||t===h.JH;t===h.Mf||l&&!n&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):l&&this._canOpen()&&this.openPanel(),(l||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._element.nativeElement.value),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let t=e.target,n=t.value;"number"===t.type&&(n=""==n?null:parseFloat(n)),this._previousValue!==n&&(this._previousValue=n,this._pendingAutoselectedOption=null,this._onChange(n),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const e=this._zone.onStable.pipe((0,A.q)(1)),t=this.autocomplete.options.changes.pipe((0,ve.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,ye.g)(0));return(0,g.T)(e,t).pipe((0,L.w)(()=>(this._zone.run(()=>{const n=this.panelOpen;this._resetActiveItem(),this.autocomplete._setVisibility(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),n!==this.panelOpen&&(this.panelOpen?this.autocomplete.opened.emit():this.autocomplete.closed.emit())}),this.panelClosingActions)),(0,A.q)(1)).subscribe(n=>this._setValueAndClose(n))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_assignOptionValue(e){const t=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e;this._updateNativeInputValue(t??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){const t=e?e.source:this._pendingAutoselectedOption;t&&(this._clearPreviousSelectedOption(t),this._assignOptionValue(t.value),this._onChange(t.value),this.autocomplete._emitSelectEvent(t),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(e){this.autocomplete.options.forEach(t=>{t!==e&&t.selected&&t.deselect()})}_attachOverlay(){let e=this._overlayRef;e?(this._positionStrategy.setOrigin(this._getConnectedElement()),e.updateSize({width:this._getPanelWidth()})):(this._portal=new X.UE(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),e=this._overlay.create(this._getOverlayConfig()),this._overlayRef=e,this._handleOverlayEvents(e),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&e&&e.updateSize({width:this._getPanelWidth()})})),e&&!e.hasAttached()&&(e.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const t=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&t!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){return new R.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const t=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],n=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:n},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:n}];let l;l="above"===this.position?s:"below"===this.position?t:[...t,...s],e.withPositions(l)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;e.autoActiveFirstOption?e._keyManager.setFirstItemActive():e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(e){const t=this.autocomplete,n=(0,c.CB)(e,t.options,t.optionGroups);if(0===e&&1===n)t._setScrollTop(0);else if(t.panel){const s=t.options.toArray()[e];if(s){const l=s._getHostElement(),d=(0,c.jH)(l.offsetTop,l.offsetHeight,t._getScrollTop(),t.panel.nativeElement.offsetHeight);t._setScrollTop(d)}}}_handleOverlayEvents(e){e.keydownEvents().subscribe(t=>{(t.keyCode===h.hY&&!(0,h.Vb)(t)||t.keyCode===h.LH&&(0,h.Vb)(t,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),t.stopPropagation(),t.preventDefault())}),e.outsidePointerEvents().subscribe()}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(i.SBq),i.Y36(R.aV),i.Y36(i.s_b),i.Y36(i.R0b),i.Y36(i.sBO),i.Y36(te),i.Y36(Q.Is,8),i.Y36(M.G_,9),i.Y36(m.K0,8),i.Y36(J.rL),i.Y36(ee,8))},a.\u0275dir=i.lG2({type:a,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[i.TTD]}),a})(),ie=(()=>{class a extends Ee{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return a.\u0275fac=function(){let o;return function(t){return(o||(o=i.n5z(a)))(t||a)}}(),a.\u0275dir=i.lG2({type:a,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,t){1&e&&i.NdJ("focusin",function(){return t._handleFocus()})("blur",function(){return t._onTouched()})("input",function(s){return t._handleInput(s)})("keydown",function(s){return t._handleKeydown(s)})("click",function(){return t._handleClick()}),2&e&&i.uIk("autocomplete",t.autocompleteAttribute)("role",t.autocompleteDisabled?null:"combobox")("aria-autocomplete",t.autocompleteDisabled?null:"list")("aria-activedescendant",t.panelOpen&&t.activeOption?t.activeOption.id:null)("aria-expanded",t.autocompleteDisabled?null:t.panelOpen.toString())("aria-owns",t.autocompleteDisabled||!t.panelOpen||null==t.autocomplete?null:t.autocomplete.id)("aria-haspopup",t.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[i._Bn([Oe]),i.qOj]}),a})(),Se=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({providers:[Be],imports:[R.U8,c.Ng,c.BQ,m.ez,J.ZD,c.Ng,c.BQ]}),a})();const ke=["tagInput"];function Le(a,o){if(1&a){const e=i.EpF();i.TgZ(0,"mat-chip",12),i.NdJ("removed",function(){const s=i.CHM(e).$implicit,l=i.oxw();return i.KtG(l.remove(s))}),i._uU(1),i.TgZ(2,"button",13)(3,"mat-icon"),i._uU(4,"cancel"),i.qZA()()()}if(2&a){const e=o.$implicit;i.xp6(1),i.hij(" ",e.categoryName+"::"+e.name," ")}}function Fe(a,o){if(1&a&&(i.TgZ(0,"mat-option",14),i._uU(1),i.qZA()),2&a){const e=o.$implicit;i.Q6J("value",e),i.xp6(1),i.hij(" ",e.categoryName+"::"+e.name," ")}}const He=function(){return{openTagCategoriesDialog:!0}},Ne=function(a){return{selectedTags:a}};let je=(()=>{class a{constructor(e,t,n,s){this.tagCategoryService=e,this.data=t,this.cd=n,this.fb=s,this.separatorKeysCodes=[h.K5,h.OC],this.selectedTags=[],this.title=t.title,this.selectedTags=[...t.selectedTags],this.tagCtrl=this.fb.control("")}ngOnInit(){this.filteredTags$=this.tagCtrl.valueChanges.pipe((0,B.O)(""),(0,x.h)(e=>"string"==typeof e),(0,oe.z)(e=>this.tagCategoryService.findTags(e).pipe((0,N.U)(t=>t.content))))}add(e){(e.value||"").trim(),e.chipInput.clear(),this.tagCtrl.setValue("")}remove(e){this.selectedTags=[...this.selectedTags.filter(t=>t.id!==e.id)],this.cd.detectChanges()}selected(e){this.tagInput.nativeElement.value="",this.tagCtrl.setValue(""),this.selectedTags=[...this.selectedTags,e.option.value],this.cd.detectChanges()}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(V),i.Y36(v.WI),i.Y36(i.sBO),i.Y36(b.j3))},a.\u0275cmp=i.Xpm({type:a,selectors:[["app-position-tags-dialog"]],viewQuery:function(e,t){if(1&e&&i.Gf(ke,5),2&e){let n;i.iGM(n=i.CRH())&&(t.tagInput=n.first)}},decls:22,vars:14,consts:[["mat-dialog-title",""],["mat-icon-button","","matTooltip","Configure Tag Categories",1,"conf-categories-btn",3,"mat-dialog-close"],["appearance","fill",1,"tag-chip-list"],["aria-label","Tag selection"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"formControl","matChipInputFor","matAutocomplete","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-button","",3,"mat-dialog-close"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(e,t){if(1&e&&(i.TgZ(0,"h2",0),i._uU(1),i.TgZ(2,"span")(3,"button",1)(4,"mat-icon"),i._uU(5,"settings_ethernet"),i.qZA()()()(),i.TgZ(6,"mat-dialog-content")(7,"mat-form-field",2)(8,"mat-label"),i._uU(9,"Position Tags"),i.qZA(),i.TgZ(10,"mat-chip-list",3,4),i.YNc(12,Le,5,1,"mat-chip",5),i.TgZ(13,"input",6,7),i.NdJ("matChipInputTokenEnd",function(s){return t.add(s)}),i.qZA()(),i.TgZ(15,"mat-autocomplete",8,9),i.NdJ("optionSelected",function(s){return t.selected(s)}),i.YNc(17,Fe,2,2,"mat-option",10),i.ALo(18,"async"),i.qZA()()(),i.TgZ(19,"mat-dialog-actions")(20,"button",11),i._uU(21,"Okay"),i.qZA()()),2&e){const n=i.MAs(11),s=i.MAs(16);i.xp6(1),i.hij(" ",t.title,""),i.xp6(2),i.Q6J("mat-dialog-close",i.DdM(11,He)),i.xp6(9),i.Q6J("ngForOf",t.selectedTags),i.xp6(1),i.Q6J("formControl",t.tagCtrl)("matChipInputFor",n)("matAutocomplete",s)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),i.xp6(4),i.Q6J("ngForOf",i.lcZ(18,9,t.filteredTags$)),i.xp6(3),i.Q6J("mat-dialog-close",i.VKq(12,Ne,t.selectedTags))}},dependencies:[m.sg,O.lW,E.Hw,v.ZT,v.uh,v.xY,v.H8,$,w,U,W,M.KE,M.hX,b.Fj,b.JJ,b.oH,K.gM,De,ie,c.ey,m.Ov],styles:[".tag-chip-list[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),a})();function Ve(a){return`${a.symbol}.${a.exchange}`}let ae=(()=>{class a{constructor(e){this.http=e}getPortfolioPositions(){return this.http.get("/portfolio-positions")}getPortfolioPositionsView(){return this.http.get("/portfolio-positions/view")}updatePositionTags(e,t){return this.http.post(`/portfolio-positions/${e}/tags`,t)}}return a.\u0275fac=function(e){return new(e||a)(i.LFG(j.eN))},a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac}),a})(),Qe=0;const Ye=(0,c.Id)(class{}),ne="mat-badge-content";let Ge=(()=>{class a extends Ye{constructor(e,t,n,s,l){super(),this._ngZone=e,this._elementRef=t,this._ariaDescriber=n,this._renderer=s,this._animationMode=l,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=Qe++,this._isInitialized=!1}get color(){return this._color}set color(e){this._setColor(e),this._color=e}get overlap(){return this._overlap}set overlap(e){this._overlap=(0,p.Ig)(e)}get content(){return this._content}set content(e){this._updateRenderedContent(e)}get description(){return this._description}set description(e){this._updateHostAriaDescription(e)}get hidden(){return this._hidden}set hidden(e){this._hidden=(0,p.Ig)(e)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&this._renderer.destroyNode(this._badgeElement),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_createBadgeElement(){const e=this._renderer.createElement("span"),t="mat-badge-active";return e.setAttribute("id",`mat-badge-content-${this._id}`),e.setAttribute("aria-hidden","true"),e.classList.add(ne),"NoopAnimations"===this._animationMode&&e.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(e),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{e.classList.add(t)})}):e.classList.add(t),e}_updateRenderedContent(e){const t=`${e??""}`.trim();this._isInitialized&&t&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=t),this._content=t}_updateHostAriaDescription(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),e&&this._ariaDescriber.describe(this._elementRef.nativeElement,e),this._description=e}_setColor(e){const t=this._elementRef.nativeElement.classList;t.remove(`mat-badge-${this._color}`),e&&t.add(`mat-badge-${e}`)}_clearExistingBadges(){const e=this._elementRef.nativeElement.querySelectorAll(`:scope > .${ne}`);for(const t of Array.from(e))t!==this._badgeElement&&t.remove()}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(i.R0b),i.Y36(i.SBq),i.Y36(C.$s),i.Y36(i.Qsj),i.Y36(i.QbO,8))},a.\u0275dir=i.lG2({type:a,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(e,t){2&e&&i.ekj("mat-badge-overlap",t.overlap)("mat-badge-above",t.isAbove())("mat-badge-below",!t.isAbove())("mat-badge-before",!t.isAfter())("mat-badge-after",t.isAfter())("mat-badge-small","small"===t.size)("mat-badge-medium","medium"===t.size)("mat-badge-large","large"===t.size)("mat-badge-hidden",t.hidden||!t.content)("mat-badge-disabled",t.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],position:["matBadgePosition","position"],content:["matBadge","content"],description:["matBadgeDescription","description"],size:["matBadgeSize","size"],hidden:["matBadgeHidden","hidden"]},features:[i.qOj]}),a})(),Ze=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({imports:[C.rt,c.BQ,c.BQ]}),a})();function We(a,o){1&a&&i._uU(0),2&a&&i.hij(" ",o.value.symbol," ")}function ze(a,o){if(1&a){const e=i.EpF();i.ynx(0),i.TgZ(1,"button",6),i.NdJ("click",function(n){i.CHM(e);const s=i.oxw().row,l=i.oxw();return i.KtG(l.openPositionTagsDialog(n,s))}),i.TgZ(2,"mat-icon"),i._uU(3,"library_add"),i.qZA()(),i.BQk()}}function $e(a,o){if(1&a){const e=i.EpF();i.TgZ(0,"button",6),i.NdJ("click",function(n){i.CHM(e);const s=i.oxw().row,l=i.oxw();return i.KtG(l.openPositionTagsDialog(n,s))}),i.TgZ(1,"mat-icon",7),i._uU(2,"tag"),i.qZA(),i.TgZ(3,"span",8),i._uU(4),i.qZA()()}if(2&a){const e=i.oxw().row;i.xp6(1),i.Q6J("matBadge",e.tags.length),i.xp6(3),i.Oqu(e.tags.length+" tags linked to this position")}}function Ue(a,o){if(1&a&&(i.YNc(0,ze,4,0,"ng-container",4),i.YNc(1,$e,5,2,"ng-template",null,5,i.W1O)),2&a){const e=o.row,t=i.MAs(2);i.Q6J("ngIf",0===e.tags.length)("ngIfElse",t)}}function Ke(a,o){if(1&a&&(i._uU(0),i.ALo(1,"currency")),2&a){const e=o.row;i.hij(" ",i.xi3(1,1,e.price,e.currencySymbol)," ")}}function qe(a,o){1&a&&i._uU(0),2&a&&i.hij(" ",o.value+"%"," ")}function Je(a,o){if(1&a&&(i._uU(0),i.ALo(1,"currency")),2&a){const e=o.row;i.hij(" ",i.xi3(1,1,e.total,e.currencySymbol)," ")}}function Xe(a,o){if(1&a&&(i._uU(0),i.ALo(1,"currency")),2&a){const e=o.row;i.hij(" ",i.xi3(1,1,e.marketValue,e.currencySymbol)," ")}}function et(a,o){1&a&&i._uU(0),2&a&&i.hij(" ",o.row.yieldOnCost+"%"," ")}const tt=function(){return{prop:"pctOfPortfolio",dir:"desc"}},it=function(a){return[a]},at=[{path:"",component:(()=>{class a{constructor(e,t){this.portfolioPositionService=e,this.matDialog=t,this.headerHeight=50,this.footerHeight=50,this.rowHeight=50,this.pageLimit=30,this.ColumnMode=y.hq,this.positions$=this.portfolioPositionService.getPortfolioPositionsView()}ngOnInit(){}openPositionTagsDialog(e,t){this.matDialog.open(je,{height:"100vh",width:"100vw",maxWidth:"512px",position:{top:"0",right:"0"},restoreFocus:!1,disableClose:!1,data:{title:`${Ve(t.identifier)} Position Tags`,selectedTags:t.tags}}).afterClosed().subscribe(s=>{if(!s)return;if(s.openTagCategoriesDialog)return void console.log("Open another dialog");const l=s.selectedTags;if(!l||JSON.stringify(l)===JSON.stringify(t.tags))return;const d=l.map(u=>u.id);this.portfolioPositionService.updatePositionTags(t.id,d).subscribe(()=>{this.positions$=this.portfolioPositionService.getPortfolioPositionsView()})})}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(ae),i.Y36(v.uw))},a.\u0275cmp=i.Xpm({type:a,selectors:[["app-positions-container"]],decls:19,vars:31,consts:[[1,"material",3,"rows","columnMode","headerHeight","rowHeight","limit","footerHeight","sorts"],[3,"prop"],["ngx-datatable-cell-template",""],[3,"prop","name"],[4,"ngIf","ngIfElse"],["tags",""],["mat-button","",3,"click"],["matBadgeColor","warn",3,"matBadge"],[1,"cdk-visually-hidden"]],template:function(e,t){1&e&&(i.TgZ(0,"ngx-datatable",0),i.ALo(1,"async"),i.TgZ(2,"ngx-datatable-column",1),i.YNc(3,We,1,1,"ng-template",2),i.qZA(),i.TgZ(4,"ngx-datatable-column",3),i.YNc(5,Ue,3,2,"ng-template",2),i.qZA(),i._UZ(6,"ngx-datatable-column",3),i.TgZ(7,"ngx-datatable-column",3),i.YNc(8,Ke,2,4,"ng-template",2),i.qZA(),i.TgZ(9,"ngx-datatable-column",3),i.YNc(10,qe,1,1,"ng-template",2),i.qZA(),i.TgZ(11,"ngx-datatable-column",3),i.YNc(12,Je,2,4,"ng-template",2),i.qZA(),i.TgZ(13,"ngx-datatable-column",3),i.YNc(14,Xe,2,4,"ng-template",2),i.qZA(),i._UZ(15,"ngx-datatable-column",3),i.TgZ(16,"ngx-datatable-column",3),i.YNc(17,et,1,1,"ng-template",2),i.qZA(),i._UZ(18,"ngx-datatable-column",3),i.qZA()),2&e&&(i.Q6J("rows",i.lcZ(1,26,t.positions$))("columnMode",t.ColumnMode.standard)("headerHeight",t.headerHeight)("rowHeight",t.rowHeight)("limit",t.pageLimit)("footerHeight",t.footerHeight)("sorts",i.VKq(29,it,i.DdM(28,tt))),i.xp6(2),i.Q6J("prop","identifier"),i.xp6(2),i.Q6J("prop","tags")("name","Tags"),i.xp6(2),i.Q6J("prop","quantity")("name","Shares"),i.xp6(1),i.Q6J("prop","price")("name","Cost Per Share"),i.xp6(2),i.Q6J("prop","pctOfPortfolio")("name","% of Portfolio"),i.xp6(2),i.Q6J("prop","total")("name","Total Cost"),i.xp6(2),i.Q6J("prop","marketValue")("name","Market Value"),i.xp6(2),i.Q6J("prop","exDividendDate")("name","Ex-dividend Date"),i.xp6(1),i.Q6J("prop","yieldOnCost")("name","Yield On Cost"),i.xp6(2),i.Q6J("prop","realizedPnl")("name","Realized P&L"))},dependencies:[m.O5,y.nE,y.UC,y.vq,O.lW,E.Hw,Ge,m.Ov,m.H9],changeDetection:0}),a})()}];let nt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({imports:[H.Bz.forChild(at),H.Bz]}),a})();var ot=r(9643);r(7340);let dt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({imports:[m.ez,c.BQ,X.eL,c.si,ot.Q8,C.rt,c.BQ]}),a})();var ht=r(1572),pt=r(3546);let ut=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({providers:[ae,V],imports:[m.ez,nt,y.xD,O.ot,E.Ps,v.Is,dt,be,M.lN,b.UX,K.AV,ht.Cq,Ze,Se,pt.QW]}),a})()}}]);