"use strict";(self.webpackChunkassets=self.webpackChunkassets||[]).push([[552],{5552:(U,l,o)=>{o.r(l),o.d(l,{ProfilesModule:()=>L});var s=o(6895),u=o(4364),i=o(5412),t=o(4650),d=o(4006),m=o(4859),M=o(9549),g=o(4144);function h(a,r){1&a&&(t.TgZ(0,"mat-form-field"),t._UZ(1,"input",11),t.qZA())}let v=(()=>{class a{constructor(e,n,c){this.fb=e,this.dialogRef=n,this.data=c}ngOnInit(){const{username:e,firstLogin:n}=this.data;this.form=this.fb.group(n?{username:e,newPassword:"",confirmNewPassword:""}:{username:e,currentPassword:"",newPassword:"",confirmNewPassword:""})}onChangePasswordClick(){this.dialogRef.close(this.form.value)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.j3),t.Y36(i.so),t.Y36(i.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-change-password-dialog"]],decls:16,vars:3,consts:[[3,"formGroup"],["mat-dialog-title",""],["mat-dialog-content","",1,"content"],[1,"username-field"],["matInput","","type","text","id","username","placeholder","Username","autocomplete","username","formControlName","username"],[4,"ngIf"],["matInput","","type","password","id","newPassword","placeholder","New Password","autocomplete","new-password","formControlName","newPassword"],["matInput","","type","password","id","confirmNewPassword","placeholder","Confirm New Password","autocomplete","new-password","formControlName","confirmNewPassword"],["mat-dialog-actions","","align","start",1,"actions"],["mat-flat-button","","color","accent","type","submit",3,"disabled","click"],["mat-button","","mat-dialog-close",""],["matInput","","type","password","id","currentPassword","placeholder","Current password","autocomplete","old-password","formControlName","currentPassword"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0)(1,"h2",1),t._uU(2,"Change password"),t.qZA(),t.TgZ(3,"div",2)(4,"mat-form-field",3),t._UZ(5,"input",4),t.qZA(),t.YNc(6,h,2,0,"mat-form-field",5),t.TgZ(7,"mat-form-field"),t._UZ(8,"input",6),t.qZA(),t.TgZ(9,"mat-form-field"),t._UZ(10,"input",7),t.qZA()(),t.TgZ(11,"div",8)(12,"button",9),t.NdJ("click",function(){return n.onChangePasswordClick()}),t._uU(13,"Save changes"),t.qZA(),t.TgZ(14,"button",10),t._uU(15,"Cancel"),t.qZA()()()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(6),t.Q6J("ngIf",!n.data.firstLogin),t.xp6(6),t.Q6J("disabled",!n.form.valid))},dependencies:[s.O5,m.lW,i.ZT,i.uh,i.xY,i.H8,M.KE,g.Nt,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u],styles:[".content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.username-field[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),a})();var y=o(3900),w=o(515),f=o(6943),x=o(8505),b=o(529);let p=(()=>{class a{constructor(e,n){this.http=e,this.auth=n}changePassword(e){return this.http.post("/users/change-password",e).pipe((0,x.b)(this.auth.setLoggedUser))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(b.eN),t.LFG(f.e))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac}),a})();var C=o(3238);const I=["*",[["mat-card-footer"]]],D=["*","mat-card-footer"];let A=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275dir=t.lG2({type:a,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),a})(),P=(()=>{class a{constructor(e){this._animationMode=e}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(t.QbO,8))},a.\u0275cmp=t.Xpm({type:a,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,n){2&e&&t.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode)},exportAs:["matCard"],ngContentSelectors:D,decls:2,vars:0,template:function(e,n){1&e&&(t.F$t(I),t.Hsn(0),t.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),a})(),T=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[C.BQ,C.BQ]}),a})();function S(a,r){if(1&a){const e=t.EpF();t.TgZ(0,"mat-card",1)(1,"mat-card-content")(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){const j=t.CHM(e).ngIf,N=t.oxw();return t.KtG(N.openChangePasswordDialog(j))}),t._uU(5,"Change password"),t.qZA()()()}if(2&a){const e=r.ngIf;t.xp6(3),t.Oqu(e.username)}}const F=[{path:"",component:(()=>{class a{constructor(e,n,c){this.authService=e,this.userService=n,this.dialog=c,this.user$=this.authService.getCurrentUser()}ngOnInit(){}openChangePasswordDialog(e){this.dialog.open(v,{height:"100vh",width:"100vw",maxWidth:"512px",position:{top:"0",right:"0"},disableClose:!0,data:{username:e.username,firstLogin:e.firstLogin}}).afterClosed().pipe((0,y.w)(c=>c?this.userService.changePassword(c):w.E)).subscribe(()=>console.debug("User password was successfully changed"))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.e),t.Y36(p),t.Y36(i.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-profile-container"]],decls:2,vars:3,consts:[["class","profile-info",4,"ngIf"],[1,"profile-info"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,S,6,1,"mat-card",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.user$))},dependencies:[s.O5,P,A,m.lW,s.Ov],styles:[".profile-info[_ngcontent-%COMP%]{width:80%;margin:0 auto}"],changeDetection:0}),a})()}];let Z=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[u.Bz.forChild(F),u.Bz]}),a})(),L=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[p],imports:[s.ez,Z,T,m.ot,i.Is,g.c,d.UX]}),a})()}}]);